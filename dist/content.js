(()=>{"use strict";const t=()=>{const t=[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((t=>{if(!(t instanceof HTMLScriptElement))return[];try{const e=JSON.parse(t.innerText);return(Array.isArray(e)?e:[e]).flatMap((t=>f(t)?[t]:[]))}catch(t){return console.error(t),[]}})),e=location.href,c=l(),p=document.querySelector('meta[property="og:image" i]'),m=document.querySelector('link[rel="icon" i]'),d=p instanceof HTMLMetaElement&&p.content||u({structuredDataList:t})||m instanceof HTMLLinkElement&&m.href||void 0,y={url:e,description:`${[c,e,[i({structuredDataList:t}),n({structuredDataList:t})].filter((t=>t)).join("\n"),r({structuredDataList:t}),o({structuredDataList:t}),a({structuredDataList:t}),s()].filter((t=>t)).join("\n\n")}\n\n`,imageURL:d,metadata:[...[...document.querySelectorAll("meta[name]")].flatMap((t=>t instanceof HTMLMetaElement?[`${t.name}:${t.content}`]:[])),...[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((t=>t instanceof HTMLElement?[t.innerText]:[]))].join(" "),title:c};chrome.runtime.sendMessage(y)};document.addEventListener("DOMContentLoaded",t),addEventListener("load",t),setInterval(t,1e3);const e=({structuredDataList:t})=>{const e=t.flatMap((t=>{if(!("@type"in t))return[];const e=t["@type"];return"Article"===e||"BlogPosting"===e||"NewsArticle"===e?[t]:[]}));if(!(e.length<1))return e[0]},r=({structuredDataList:t})=>t.flatMap((t=>{if(!("@type"in t)||"BreadcrumbList"!==t["@type"])return[];const{itemListElement:e}=t;return Array.isArray(e)?[[...e].sort(((t,e)=>t.position-e.position)).flatMap((t=>{if(!t)return[];const e=t.item?.name??t.name;return"string"==typeof e?[m(e)]:[]})).join(" > ")]:[]})).join("\n"),n=({structuredDataList:t})=>{const r=e({structuredDataList:t}),n=r?.author,i=r?.publisher,a=[...new Set([p(n)&&n.name,p(i)&&i.name,,...[...document.querySelectorAll('meta[name="author" i], meta[name="creator" i], meta[name="publisher" i]')].flatMap((t=>t instanceof HTMLMetaElement?[t.content]:[]))].flatMap((t=>"string"==typeof t?[t]:[])))];return a.length>=1&&`By ${a.map(m).join(" ")}`},i=({structuredDataList:t})=>{const r=e({structuredDataList:t}),n=r?.dateModified??r?.datePublished;return"string"==typeof n&&n},a=({structuredDataList:t})=>{const r=document.querySelector('meta[name="description" i]'),n=document.querySelector('meta[property="og:description" i]'),i=c({structuredDataList:t})?.description,a=e({structuredDataList:t})?.headline;return"string"==typeof i&&i||"string"==typeof a&&a||n instanceof HTMLMetaElement&&n.content||r instanceof HTMLMetaElement&&r.content},o=({structuredDataList:t})=>{const e=[],r=c({structuredDataList:t});if(r){const{brand:t,name:n,offers:i}=r,a=Array.isArray(i)?i[0]:i;e.push(["string"==typeof n&&n,p(t)&&`${m(t.name)} brand`,a&&"price"in a&&("number"==typeof a.price||"string"==typeof a.price)&&`${a.price} ${"string"==typeof a.priceCurrency?a.priceCurrency:""}`,a&&"lowPrice"in a&&("number"==typeof a.lowPrice||"string"==typeof a.lowPrice)&&"string"==typeof a.priceCurrency&&`${a.lowPrice} ${"number"==typeof a.highPrice||"string"==typeof a.highPrice?`~ ${a.highPrice} `:""}${a.priceCurrency}`,a&&"availability"in a&&"string"==typeof a.availability&&a.availability.replace("http://schema.org/","").replace("https://schema.org/",""),a&&"itemCondition"in a&&"string"==typeof a.itemCondition&&a.itemCondition.replace("http://schema.org/","").replace("https://schema.org/",""),a&&"offerCount"in a&&"number"==typeof a.offerCount&&`${a.offerCount} left`,a&&"priceValidUntil"in a&&"string"==typeof a.priceValidUntil&&`Until ${a.priceValidUntil}`,,])}return e.map((t=>t.flatMap((t=>"string"==typeof t?[`- ${t}`]:[])).join("\n"))).filter((t=>t)).join("\n\n")},s=()=>{const t=document.querySelector('meta[name="keywords" i]');return(t instanceof HTMLMetaElement&&t.content||"").split(",").flatMap((t=>{const e=t.trim();return""===e?[]:[e]})).map(m).join(" ")},c=({structuredDataList:t})=>{const e=t.flatMap((t=>"@type"in t&&"Product"===t["@type"]?[t]:[]));if(!(e.length<1))return e[0]},u=({structuredDataList:t})=>{const r=c({structuredDataList:t});if(r){const{image:t}=r,e=Array.isArray(t)&&t[0];if("string"==typeof e)return e}const n=e({structuredDataList:t});if(n){const{image:t,publisher:e}=n,r=Array.isArray(t)&&t[0];if("string"==typeof r)return r;const i=p(e)&&p(e.logo)&&e.logo.url;if("string"==typeof i)return i}const i=t.flatMap((t=>"@type"in t&&"Organization"===t["@type"]?[t]:[]));if(i.length>=1){const{logo:t}=i[0];if("string"==typeof t)return t}},l=()=>{const t=document.querySelector('meta[property="og:title" i]');return t instanceof HTMLMetaElement&&t.content||document.title},p=t=>"object"==typeof t&&null!==t,f=t=>p(t)&&["http://schema.org","http://schema.org/","https://schema.org","https://schema.org/"].includes(t["@context"]),m=t=>`#${t.replaceAll(" ","_")}`})();