(()=>{"use strict";const t=t=>"object"==typeof t&&null!==t,e=({structuredDataList:t})=>{const e=t.flatMap((t=>{if(!("@type"in t))return[];const e=t["@type"];return"Article"===e||"BlogPosting"===e||"NewsArticle"===e?[t]:[]}));if(!(e.length<1))return e[0]},r=({structuredDataList:t})=>{const e=t.flatMap((t=>"@type"in t&&"Product"===t["@type"]?[t]:[]));if(!(e.length<1))return e[0]},n=t=>t.replace("http://schema.org/","").replace("https://schema.org/",""),i=({structuredDataList:t})=>t.flatMap((t=>{if(!("@type"in t)||"BreadcrumbList"!==t["@type"])return[];const{itemListElement:e}=t;return Array.isArray(e)?[[...e].sort(((t,e)=>t.position-e.position)).flatMap((t=>{if(!t)return[];const e=t.item?.name??t.name;return"string"==typeof e?[l(e)]:[]})).join(" > ")]:[]})).join("\n"),a=({structuredDataList:r})=>{const n=e({structuredDataList:r}),i=n?.author,a=n?.publisher,o=[...new Set([t(i)&&i.name,t(a)&&a.name,,...[...document.querySelectorAll('meta[name="author" i], meta[name="creator" i], meta[name="publisher" i]')].flatMap((t=>t instanceof HTMLMetaElement?[t.content]:[]))].flatMap((t=>"string"==typeof t?[t]:[])))];return o.length>=1&&`By ${o.map(l).join(" ")}`},o=({structuredDataList:t})=>{const r=e({structuredDataList:t}),n=r?.dateModified??r?.datePublished;return"string"==typeof n&&n},s=({structuredDataList:t})=>{const n=document.querySelector('meta[name="description" i]'),i=document.querySelector('meta[property="og:description" i]'),a=r({structuredDataList:t})?.description,o=e({structuredDataList:t})?.headline;return"string"==typeof a&&a||"string"==typeof o&&o||i instanceof HTMLMetaElement&&i.content||n instanceof HTMLMetaElement&&n.content},c=({structuredDataList:e})=>{const i=[],a=r({structuredDataList:e});if(a){const{brand:e,name:r,offers:o}=a,s=Array.isArray(o)?o[0]:o;i.push(["string"==typeof r&&r,t(e)&&`${l(e.name)} brand`,s&&"price"in s&&("number"==typeof s.price||"string"==typeof s.price)&&`${s.price} ${"string"==typeof s.priceCurrency?s.priceCurrency:""}`,s&&"lowPrice"in s&&("number"==typeof s.lowPrice||"string"==typeof s.lowPrice)&&"string"==typeof s.priceCurrency&&`${s.lowPrice} ${"number"==typeof s.highPrice||"string"==typeof s.highPrice?`~ ${s.highPrice} `:""}${s.priceCurrency}`,s&&"availability"in s&&"string"==typeof s.availability&&n(s.availability),s&&"itemCondition"in s&&"string"==typeof s.itemCondition&&n(s.itemCondition),s&&"offerCount"in s&&"number"==typeof s.offerCount&&`${s.offerCount} left`,s&&"priceValidUntil"in s&&"string"==typeof s.priceValidUntil&&`Until ${s.priceValidUntil}`,,])}const o=(({structuredDataList:t})=>{const e=t.flatMap((t=>"@id"in t&&"address"in t&&"name"in t?[t]:[]));if(!(e.length<1))return e[0]})({structuredDataList:e});if(o){const{address:e,geo:r,name:n,priceRange:a,telephone:s}=o;i.push(["string"==typeof n&&n,t(e)&&["streetAddress"in e&&e.streetAddress,"addressLocality"in e&&e.addressLocality,"addressRegion"in e&&e.addressRegion,"postalCode"in e&&e.postalCode,"addressCountry"in e&&e.addressCountry].filter((t=>t)).join(", "),r&&"latitude"in r&&("number"==typeof r.latitude||"string"==typeof r.latitude)&&"longitude"in r&&("number"==typeof r.longitude||"string"==typeof r.longitude)&&`Map https://www.google.com/maps?q=${r.latitude},${r.longitude}`,"string"==typeof a&&a,"string"==typeof s&&s])}return i.map((t=>t.flatMap((t=>"string"==typeof t?[`- ${t}`]:[])).join("\n"))).filter((t=>t)).join("\n\n")},u=()=>{const t=document.querySelector('meta[name="keywords" i]');return(t instanceof HTMLMetaElement&&t.content||"").split(",").flatMap((t=>{const e=t.trim();return""===e?[]:[e]})).map(l).join(" ")},l=t=>`#${t.replaceAll(" ","_")}`,p=()=>{const n=[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((e=>{if(!(e instanceof HTMLScriptElement))return[];try{const r=JSON.parse(e.innerText);return(Array.isArray(r)?r:[r]).flatMap((e=>{return t(r=e)&&["http://schema.org","http://schema.org/","https://schema.org","https://schema.org/"].includes(r["@context"])?[e]:[];var r}))}catch(t){return console.error(t),[]}})),l=location.href,p=(()=>{const t=document.querySelector('meta[property="og:title" i]');return t instanceof HTMLMetaElement&&t.content||document.title})(),d=document.querySelector('meta[property="og:image" i]'),f=document.querySelector('link[rel="icon" i]'),y=d instanceof HTMLMetaElement&&d.content||(({structuredDataList:n})=>{const i=r({structuredDataList:n});if(i){const{image:t}=i,e=Array.isArray(t)&&t[0];if("string"==typeof e)return e}const a=e({structuredDataList:n});if(a){const{image:e,publisher:r}=a,n=Array.isArray(e)&&e[0];if("string"==typeof n)return n;const i=t(r)&&t(r.logo)&&r.logo.url;if("string"==typeof i)return i}const o=n.flatMap((t=>"@type"in t&&"Organization"===t["@type"]?[t]:[]));if(o.length>=1){const{logo:t}=o[0];if("string"==typeof t)return t}})({structuredDataList:n})||f instanceof HTMLLinkElement&&f.href||void 0,m={url:l,description:`${[p,l,[o({structuredDataList:n}),a({structuredDataList:n})].filter((t=>t)).join("\n"),i({structuredDataList:n}),c({structuredDataList:n}),s({structuredDataList:n}),u()].filter((t=>t)).join("\n\n")}\n\n`,imageURL:y,metadata:[...[...document.querySelectorAll("meta[name]")].flatMap((t=>t instanceof HTMLMetaElement?[`${t.name}:${t.content}`]:[])),...[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((t=>t instanceof HTMLElement?[t.innerText]:[]))].join(" "),title:p};chrome.runtime.sendMessage(m)};p(),addEventListener("load",p),setInterval(p,1e3)})();