(()=>{"use strict";const t=t=>"object"==typeof t&&null!==t,e=({structuredDataList:t})=>{const e=t.flatMap((t=>{if(!("@type"in t))return[];const e=t["@type"];return"Article"===e||"BlogPosting"===e||"NewsArticle"===e?[t]:[]}));if(!(e.length<1))return e[0]},r=({structuredDataList:t})=>{const e=t.flatMap((t=>"@type"in t&&"Product"===t["@type"]?[t]:[]));if(!(e.length<1))return e[0]},n=()=>{const e=[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((e=>{if(!(e instanceof HTMLScriptElement))return[];try{const r=JSON.parse(e.innerText);return(Array.isArray(r)?r:[r]).flatMap((e=>{return t(r=e)&&["http://schema.org","http://schema.org/","https://schema.org","https://schema.org/"].includes(r["@context"])?[e]:[];var r}))}catch(t){return console.error(t),[]}})),r=location.href,n=p(),f=document.querySelector('meta[property="og:image" i]'),m=document.querySelector('link[rel="icon" i]'),d=f instanceof HTMLMetaElement&&f.content||l({structuredDataList:e})||m instanceof HTMLLinkElement&&m.href||void 0,y={url:r,description:`${[n,r,[o({structuredDataList:e}),a({structuredDataList:e})].filter((t=>t)).join("\n"),i({structuredDataList:e}),c({structuredDataList:e}),s({structuredDataList:e}),u()].filter((t=>t)).join("\n\n")}\n\n`,imageURL:d,metadata:[...[...document.querySelectorAll("meta[name]")].flatMap((t=>t instanceof HTMLMetaElement?[`${t.name}:${t.content}`]:[])),...[...document.querySelectorAll('script[type="application/ld+json" i]')].flatMap((t=>t instanceof HTMLElement?[t.innerText]:[]))].join(" "),title:n};chrome.runtime.sendMessage(y)};document.addEventListener("DOMContentLoaded",n),addEventListener("load",n),setInterval(n,1e3);const i=({structuredDataList:t})=>t.flatMap((t=>{if(!("@type"in t)||"BreadcrumbList"!==t["@type"])return[];const{itemListElement:e}=t;return Array.isArray(e)?[[...e].sort(((t,e)=>t.position-e.position)).flatMap((t=>{if(!t)return[];const e=t.item?.name??t.name;return"string"==typeof e?[f(e)]:[]})).join(" > ")]:[]})).join("\n"),a=({structuredDataList:r})=>{const n=e({structuredDataList:r}),i=n?.author,a=n?.publisher,o=[...new Set([t(i)&&i.name,t(a)&&a.name,,...[...document.querySelectorAll('meta[name="author" i], meta[name="creator" i], meta[name="publisher" i]')].flatMap((t=>t instanceof HTMLMetaElement?[t.content]:[]))].flatMap((t=>"string"==typeof t?[t]:[])))];return o.length>=1&&`By ${o.map(f).join(" ")}`},o=({structuredDataList:t})=>{const r=e({structuredDataList:t}),n=r?.dateModified??r?.datePublished;return"string"==typeof n&&n},s=({structuredDataList:t})=>{const n=document.querySelector('meta[name="description" i]'),i=document.querySelector('meta[property="og:description" i]'),a=r({structuredDataList:t})?.description,o=e({structuredDataList:t})?.headline;return"string"==typeof a&&a||"string"==typeof o&&o||i instanceof HTMLMetaElement&&i.content||n instanceof HTMLMetaElement&&n.content},c=({structuredDataList:e})=>{const n=[],i=r({structuredDataList:e});if(i){const{brand:e,name:r,offers:a}=i,o=Array.isArray(a)?a[0]:a;n.push(["string"==typeof r&&r,t(e)&&`${f(e.name)} brand`,o&&"price"in o&&("number"==typeof o.price||"string"==typeof o.price)&&`${o.price} ${"string"==typeof o.priceCurrency?o.priceCurrency:""}`,o&&"lowPrice"in o&&("number"==typeof o.lowPrice||"string"==typeof o.lowPrice)&&"string"==typeof o.priceCurrency&&`${o.lowPrice} ${"number"==typeof o.highPrice||"string"==typeof o.highPrice?`~ ${o.highPrice} `:""}${o.priceCurrency}`,o&&"availability"in o&&"string"==typeof o.availability&&o.availability.replace("http://schema.org/","").replace("https://schema.org/",""),o&&"itemCondition"in o&&"string"==typeof o.itemCondition&&o.itemCondition.replace("http://schema.org/","").replace("https://schema.org/",""),o&&"offerCount"in o&&"number"==typeof o.offerCount&&`${o.offerCount} left`,o&&"priceValidUntil"in o&&"string"==typeof o.priceValidUntil&&`Until ${o.priceValidUntil}`,,])}return n.map((t=>t.flatMap((t=>"string"==typeof t?[`- ${t}`]:[])).join("\n"))).filter((t=>t)).join("\n\n")},u=()=>{const t=document.querySelector('meta[name="keywords" i]');return(t instanceof HTMLMetaElement&&t.content||"").split(",").flatMap((t=>{const e=t.trim();return""===e?[]:[e]})).map(f).join(" ")},l=({structuredDataList:n})=>{const i=r({structuredDataList:n});if(i){const{image:t}=i,e=Array.isArray(t)&&t[0];if("string"==typeof e)return e}const a=e({structuredDataList:n});if(a){const{image:e,publisher:r}=a,n=Array.isArray(e)&&e[0];if("string"==typeof n)return n;const i=t(r)&&t(r.logo)&&r.logo.url;if("string"==typeof i)return i}const o=n.flatMap((t=>"@type"in t&&"Organization"===t["@type"]?[t]:[]));if(o.length>=1){const{logo:t}=o[0];if("string"==typeof t)return t}},p=()=>{const t=document.querySelector('meta[property="og:title" i]');return t instanceof HTMLMetaElement&&t.content||document.title},f=t=>`#${t.replaceAll(" ","_")}`})();