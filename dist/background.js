(()=>{"use strict";const o={scrapboxProjectName:"",scrapboxURL:"https://scrapbox.io"},e=new Map;chrome.runtime.onMessage.addListener((({body:o,title:t},r)=>{const a=r.tab?.id;void 0!==a&&e.set(a,{body:o,title:t})})),chrome.action.onClicked.addListener((async t=>{const r=t.id;if(void 0===r)return;const a=e.get(r);if(!a)throw new Error("No page found for bookmark");const{scrapboxProjectName:c,scrapboxURL:n}=await chrome.storage.sync.get(o);c&&n?chrome.tabs.create({url:`${n}/${c}/${encodeURIComponent(a.title)}?${new URLSearchParams({body:a.body}).toString()}`}):chrome.runtime.openOptionsPage()}))})();