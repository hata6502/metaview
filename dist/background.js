(()=>{"use strict";const e={scrapboxProjectName:"",scrapboxURL:"https://scrapbox.io"},o=new Map;chrome.runtime.onMessage.addListener((({url:e,body:r,title:t})=>o.set(e,{body:r,title:t}))),chrome.bookmarks.onCreated.addListener((async(r,t)=>{const{url:a}=t;if(!a)return;const s=o.get(a);if(!s)throw new Error("No page found for bookmark");const{scrapboxProjectName:n,scrapboxURL:c}=await chrome.storage.sync.get(e);n&&c?chrome.tabs.create({url:`${c}/${n}/${encodeURIComponent(s.title)}?${new URLSearchParams({body:s.body}).toString()}`}):chrome.runtime.openOptionsPage()}))})();